(this["webpackJsonptest-task"]=this["webpackJsonptest-task"]||[]).push([[0],{409:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(27),c=n.n(s),i=n(416),o=n(411),u=n(412),l=n(62),j=n(413),d=n(93),b=n(31),O=n(77),p=n.n(O),m=n(6),x=i.a.Title,f=r.a.memo((function(){var e=Object(b.c)((function(e){return e.task.developer}));return Object(m.jsxs)(o.a,{children:[Object(m.jsx)(u.a,{span:6,offset:6,className:"gutter-row",children:Object(m.jsx)(x,{level:2,style:{marginTop:15},children:"Test task"})}),Object(m.jsx)(u.a,{span:6,offset:6,className:"gutter-row",children:"al4i"===e?Object(m.jsx)(l.a,{type:"primary",style:{marginTop:20},children:Object(m.jsx)(d.b,{to:"/login",children:"Login"})}):Object(m.jsx)(o.a,{style:{marginTop:20},children:Object(m.jsxs)(p.a,{keyboard:!0,children:[" ",e]})})}),Object(m.jsx)(j.a,{})]})})),h=n(107),k=n(207),v=n(66),g=n.n(v),y=n(106),w=n(26),T=n(208),_=n.n(T).a.create({baseURL:"https://uxcandy.com/~shapoval/test-task-backend/v2",headers:{"Content-Type":"multipart/form-data"}}),E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _.get("?developer=".concat(e,"&page=").concat(t)).then((function(e){return e}))},S=function(e,t){return _.post("/create?developer=".concat(t),e).then((function(e){return e}))},C=function(e,t){return _.post("/login?developer=".concat(t),e).then((function(e){return e}))},I=function(e,t,n){return _.post("edit/".concat(t,"?developer=").concat(n),e).then((function(e){return e}))},F="task/SET_TASKS",P="task/SET_TOTAL_TASK_COUNT",q="task/SET_CURRENT_PAGE",N="task/SET_SET_TOKEN",A="task/SET_DEVOLOPER",D="task/SET_EDIT",L={developer:"al4i",total_task_count:0,tasks:[],currentPage:1,token:null,id:null,isEdit:!1},R=function(e){return{type:F,tasks:e}},U=function(e){return{type:P,total_task_count:e}},$=function(e){return{type:q,currentPage:e}},K=function(e){return{type:D,isEdit:e}},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(){var n=Object(y.a)(g.a.mark((function n(a){var r;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E(e,t);case 2:r=n.sent,a($(t)),a(R(r.data.message.tasks)),a(U(+r.data.message.total_task_count));case 6:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object(w.a)(Object(w.a)({},e),{},{tasks:t.tasks});case P:return Object(w.a)(Object(w.a)({},e),{},{total_task_count:t.total_task_count});case q:return Object(w.a)(Object(w.a)({},e),{},{currentPage:t.currentPage});case N:return Object(w.a)(Object(w.a)({},e),{},{token:t.token});case A:return Object(w.a)(Object(w.a)({},e),{},{developer:t.developer});case D:return Object(w.a)(Object(w.a)({},e),{},{isEdit:t.isEdit});default:return e}},z=Object(h.b)({task:V}),G=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||h.c,J=Object(h.d)(z,G(Object(h.a)(k.a)));window.store=J;var X=J,B=n(29),H=n(414),Q=[{title:"User name",dataIndex:"username",key:"username",editable:!0,sorter:function(e,t){return e.username.length-t.username.length}},{title:"E-mail",dataIndex:"email",key:"email",sorter:function(e,t){return e.email.length-t.email.length}},{title:"Task",dataIndex:"text",key:"text",sorter:function(e,t){return e.text.length-t.text.length}},{title:"id",dataIndex:"id",key:"id",render:function(e){return Object(m.jsx)(l.a,{type:"primary",children:Object(m.jsx)(d.b,{to:"/edit/".concat(e),children:"Edit"})})}},{title:"Status",dataIndex:"status",key:"status",render:function(e){return 0===e?Object(m.jsx)(p.a,{type:"danger",children:"task not completed"}):1===e?Object(m.jsx)(p.a,{type:"danger",children:"task not completed, edited by admin"}):10===e?Object(m.jsx)(p.a,{type:"success",children:"task completed"}):11===e?Object(m.jsx)(p.a,{type:"success",children:"task edited by admin and completed"}):""}}],W=r.a.memo((function(e){var t=e.rows,n=void 0===t?3:t,r=Object(b.c)((function(e){return e.task.tasks})),s=Object(b.c)((function(e){return e.task.total_task_count})),c=Object(b.c)((function(e){return e.task.currentPage})),i=Object(b.c)((function(e){return e.task.developer})),o=Object(b.b)();Object(a.useEffect)((function(){o(M(i,1))}),[i]);return Object(m.jsx)(H.a,{dataSource:r,columns:Q,pagination:{pageSize:n,total:s,current:c,onChange:function(e){o(M(i,e))},defaultCurrent:1,showSizeChanger:!1}})})),Y=(n(150),n(415)),Z=n(417),ee={labelCol:{span:8},wrapperCol:{span:16}},te=r.a.memo((function(){var e=Object(b.b)(),t=r.a.createRef(),n=Object(b.c)((function(e){return e.task.developer}));return Object(m.jsxs)(Y.a,Object(w.a)(Object(w.a)({ref:t},ee),{},{name:"message",onFinish:function(a){e(function(e,t,n,a){return function(){var r=Object(y.a)(g.a.mark((function r(s){var c;return g.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(c=new FormData).set("username",t),c.set("email",e),c.set("text",n),r.next=6,S(c,a);case 6:s(M(a,1));case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(a.user.email,a.user.name,a.user.text,n)),t.current.resetFields()},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"}},children:[Object(m.jsx)(Y.a.Item,{name:["user","name"],label:"name",rules:[{required:!0}],children:Object(m.jsx)(Z.a,{})}),Object(m.jsx)(Y.a.Item,{name:["user","email"],label:"email",rules:[{required:!0,type:"email"}],children:Object(m.jsx)(Z.a,{})}),Object(m.jsx)(Y.a.Item,{name:["user","text"],label:"Text",rules:[{required:!0}],children:Object(m.jsx)(Z.a.TextArea,{})}),Object(m.jsx)(Y.a.Item,{wrapperCol:Object(w.a)(Object(w.a)({},ee.wrapperCol),{},{offset:8}),children:Object(m.jsx)(l.a,{type:"primary",htmlType:"submit",children:"Submit"})})]}))})),ne=n(212),ae=n.n(ne),re=r.a.memo((function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(u.a,{span:6,offset:6,children:Object(m.jsx)(ae.a,{level:3,children:"Add new task"})}),Object(m.jsx)(u.a,{xs:24,md:{span:8,offset:4},children:Object(m.jsx)(te,{})}),Object(m.jsx)(o.a,{children:Object(m.jsxs)(u.a,{xs:24,md:{span:12,offset:6},children:[Object(m.jsx)(i.a.Title,{level:4}),Object(m.jsx)(W,{})]})})]})})),se={labelCol:{span:8},wrapperCol:{span:5}},ce={wrapperCol:{offset:8,span:16}},ie=r.a.memo((function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.task.token}));return Object(m.jsx)(m.Fragment,{children:t?Object(m.jsx)(re,{}):Object(m.jsxs)(Y.a,Object(w.a)(Object(w.a)({},se),{},{offset:8,span:8,name:"basic",initialValues:{remember:!0},onFinish:function(t){var n,a;e((n=t.username,a=t.password,function(){var e=Object(y.a)(g.a.mark((function e(t){var r,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).set("username",n),r.set("password",a),e.next=5,C(r,n);case 5:s=e.sent,t((c=s.data.message.token,{type:N,token:c})),s.data.message.token&&(t({type:A,developer:n}),t(M(n,1)));case 8:case"end":return e.stop()}var c}),e)})));return function(t){return e.apply(this,arguments)}}()))},onFinishFailed:function(e){console.log("Failed:",e)},children:[Object(m.jsx)(Y.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(m.jsx)(Z.a,{})}),Object(m.jsx)(Y.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(m.jsx)(Z.a.Password,{})}),Object(m.jsx)(Y.a.Item,Object(w.a)(Object(w.a)({},ce),{},{children:Object(m.jsx)(l.a,{type:"primary",htmlType:"submit",children:"Submit"})}))]}))})})),oe=n(216),ue=n(132),le=n(418),je=i.a.Title,de={labelCol:{span:8},wrapperCol:{span:6}},be=r.a.memo((function(){var e=Object(b.c)((function(e){return e.task.isEdit})),t=Object(b.c)((function(e){return e.task.tasks})),n=Object(B.g)().location.pathname.substr(6),r=t.find((function(e){return e.id===+n})).text,s=Object(b.c)((function(e){return e.task.developer})),c=Object(b.c)((function(e){return e.task.token})),i=Object(b.b)(),o=Object(a.useState)(0),j=Object(oe.a)(o,2),d=j[0],O=j[1];if(e)return Object(m.jsx)(B.a,{to:"/content"});return Object(m.jsx)(m.Fragment,{children:"al4i"===s?Object(m.jsxs)(u.a,{span:8,offset:6,className:"gutter-row",children:[Object(m.jsx)(je,{level:3,type:"danger",children:"Only registered users can edit Tasks"}),Object(m.jsx)(je,{level:4,children:"Login: admin"}),Object(m.jsx)(je,{level:4,children:"password: 123"})]}):Object(m.jsxs)(Y.a,Object(w.a)(Object(w.a)({},de),{},{name:"message",onFinish:function(e){return i(function(e,t,n,a,r){return function(){var s=Object(y.a)(g.a.mark((function s(c){var i;return g.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return(i=new FormData).set("text",e),i.set("token",a),i.set("status",r),s.next=6,I(i,t,n);case 6:(s.sent.data.status="ok")&&(c(K(!0)),c(M(n,1)),c(K(!1)));case 8:case"end":return s.stop()}}),s)})));return function(e){return s.apply(this,arguments)}}()}(e.user.text,n,s,c,d))},validateMessages:{required:"${label} is required!"},children:[Object(m.jsx)(Y.a.Item,{name:["user","text"],label:"Text",children:Object(m.jsx)(Z.a.TextArea,{placeholder:r})}),Object(m.jsx)(ue.a.Group,{onChange:function(e){O(e.target.value)},children:Object(m.jsx)(le.b,{direction:"vertical",children:Object(m.jsxs)(u.a,{span:8,offset:15,className:"gutter-row",children:[Object(m.jsx)(ue.a,{value:0,children:"Task not completed"}),Object(m.jsx)(ue.a,{value:1,children:"Task not completed, edited by admin"}),Object(m.jsx)(ue.a,{value:10,children:"Task completed"}),Object(m.jsx)(ue.a,{value:11,children:"Task edited by admin and completed"})]})})}),Object(m.jsx)(Y.a.Item,{wrapperCol:Object(w.a)(Object(w.a)({},de.wrapperCol),{},{offset:8}),children:Object(m.jsx)(l.a,{type:"primary",htmlType:"submit",style:{marginTop:20},children:"Submit"})})]}))})})),Oe=n(213),pe=function(){return Object(m.jsx)(d.a,{children:Object(m.jsxs)(b.a,{store:X,children:[Object(m.jsx)(f,{}),Object(m.jsxs)(B.d,{children:[Object(m.jsx)(B.b,{exact:!0,path:"/",render:function(){return Object(m.jsx)(B.a,{to:"/content"})}}),Object(m.jsx)(B.b,{path:"/content",render:function(){return Object(m.jsx)(re,{})}}),Object(m.jsx)(B.b,{exact:!0,path:"/login",render:function(){return Object(m.jsx)(ie,{})}}),Object(m.jsx)(B.b,{path:"/edit/:id?",render:function(){return Object(m.jsx)(be,{})}})]}),Object(m.jsxs)(Oe.Footer,{children:["Creacet by ",Object(m.jsx)("a",{href:"https://github.com/al4iii",children:"al4ii"})]})]})})};c.a.render(Object(m.jsx)(pe,{}),document.getElementById("root"))}},[[409,1,2]]]);
//# sourceMappingURL=main.f2a74e57.chunk.js.map